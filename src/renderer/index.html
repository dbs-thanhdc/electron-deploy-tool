<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deploy Tool</title>
  <link rel="stylesheet" href="styles/themes.css">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/holiday-theme.css">
</head>
<body class="dark-theme">
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>Deploy Tool</h1>
      </div>
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="deploy">
          <span class="nav-icon">üöÄ</span>
          <span class="nav-label">Deploy</span>
        </a>
        <a href="#" class="nav-item" data-page="projects">
          <span class="nav-icon">üì¶</span>
          <span class="nav-label">Projects</span>
        </a>
        <a href="#" class="nav-item" data-page="history">
          <span class="nav-icon">üìú</span>
          <span class="nav-label">History</span>
        </a>
        <a href="#" class="nav-item" data-page="settings">
          <span class="nav-icon">‚öôÔ∏è</span>
          <span class="nav-label">Settings</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <div class="theme-toggle">
          <label class="toggle-switch">
            <input type="checkbox" id="themeToggle">
            <span class="toggle-slider"></span>
          </label>
          <span class="toggle-label">Dark Mode</span>
        </div>
        
        <div class="background-toggle">
          <label class="toggle-switch">
            <input type="checkbox" id="backgroundToggle">
            <span class="toggle-slider"></span>
          </label>
          <span class="toggle-label">Background</span>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Deploy Page -->
      <div id="deploy-page" class="page active">
        <div class="page-header">
          <h2>Deploy Project</h2>
        </div>
        
        <div class="deploy-form">
          <div class="form-row">
            <div class="form-group">
              <label for="projectSelect">Project</label>
              <select id="projectSelect" class="form-control">
                <option value="">Select a project...</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="branchSelect">Branch</label>
              <div class="select-with-filter">
                <input type="text" id="branchFilter" class="form-control filter-input" placeholder="Filter branches..." disabled>
                <select id="branchSelect" class="form-control select-filtered" disabled>
                  <option value="">Select branch...</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="envSelect">Environment</label>
              <select id="envSelect" class="form-control" disabled>
                <option value="">Select environment...</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="typeSelect">Deploy Type</label>
              <select id="typeSelect" class="form-control" disabled>
                <option value="">Select type...</option>
              </select>
            </div>

            <div class="form-group">
              <label for="commitTemplate">Commit format</label>
              <input type="text" id="commitTemplate" class="form-control" placeholder="deploy: {env}, {type}" value="deploy: {env}, {type}" disabled>
            </div>

            <div class="form-group">
              <label for="fileContentTemplate">File content format</label>
              <input type="text" id="fileContentTemplate" class="form-control" placeholder="deploy: {env}, {type}" value="deploy: {env}, {type}" disabled>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" id="dryRunCheck">
                <span>Dry Run (test without pushing)</span>
              </label>
            </div>
          </div>

          <div class="form-actions">
            <button id="deployBtn" class="btn btn-primary" disabled>
              <span class="btn-text">Start Deploy</span>
            </button>
          </div>
        </div>

        <!-- Deploy Log Output -->
        <div class="log-container">
          <div class="log-header">
            <h3>Deploy Log</h3>
            <button id="clearLogBtn" class="btn btn-small">Clear</button>
          </div>
          <div id="deployLog" class="log-output"></div>
        </div>
      </div>

      <!-- Projects Page -->
      <div id="projects-page" class="page">
        <div class="page-header">
          <h2>Manage Projects</h2>
          <button id="addProjectBtn" class="btn btn-primary">+ Add Project</button>
        </div>

        <div id="projectsList" class="projects-list"></div>

        <!-- Add/Edit Project Form -->
        <div id="projectFormContainer" class="project-form-container" style="display: none;">
          <div class="form-card">
            <div class="form-card-header">
              <h3 id="formTitle">Add New Project</h3>
              <button id="cancelFormBtn" class="btn btn-small">Cancel</button>
            </div>
            <div class="form-card-body">
              <div class="form-group">
                <label for="projectName">Project Name *</label>
                <input type="text" id="projectName" class="form-control" placeholder="e.g., auth">
              </div>
              
              <div class="form-group">
                <label for="repoPath">Repository Path *</label>
                <div class="input-with-button">
                  <input type="text" id="repoPath" class="form-control" placeholder="C:\Projects\my-project">
                  <button type="button" id="browseRepoBtn" class="btn btn-small btn-browse">Browse</button>
                </div>
              </div>
              
              <div class="form-group">
                <label for="envs">Environments (comma separated) *</label>
                <input type="text" id="envs" class="form-control" placeholder="dev, dev-final, stage, stage-final">
              </div>
              
              <div class="form-group">
                <label for="deployTypes">Deploy Types (comma separated) *</label>
                <input type="text" id="deployTypes" class="form-control" placeholder="api, webapp, all">
              </div>

              <div class="form-group">
                <label for="projectCommitFormat">Commit Format *</label>
                <div class="select-with-input">
                  <select id="projectCommitFormat" class="form-control">
                    <option value="v1" selected>V1</option>
                    <option value="v2">V2</option>
                    <option value="custom">custom</option>
                  </select>
                  <input type="text" id="projectCommitTemplate" class="form-control" placeholder="deploy: {env}, {type}" disabled>
                  <div class="note-box">
                    <span>Note:</span>
                    <ul>
                      <li><code>{env}</code> Environments (e.g., dev, stage)</li>
                      <li><code>{type}</code> Deploy types (e.g., api, webapp)</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="projectCICDFileName">CICD file name *</label>
                <input type="text" id="projectCICDFileName" class="form-control" placeholder="CICD.txt">
              </div>

              <div class="form-group">
                <label for="projectFileContentFormat">CICD file content format *</label>
                <div class="select-with-input">
                  <select id="projectFileContentFormat" class="form-control">
                    <option value="default" selected>Using commit message</option>
                    <option value="custom">custom</option>
                  </select>
                  <input type="text" id="projectFileContentTemplate" class="form-control" placeholder="File content format..." value="deploy: {env}, {type}" disabled>

                  <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="projectFileContentSmartAppend">
                      <span>Smart append (append "+" when message is duplicate)</span>
                    </label>
                  </div>

                  <div class="note-box">
                    <span>Note:</span>
                    <ul>
                      <li><code>{env}</code> Environments (e.g., dev, stage)</li>
                      <li><code>{type}</code> Deploy types (e.g., api, webapp)</li>
                      <li><code>{date:y-m-d}</code> Deployment date (e.g., 2024-06-01)</li>
                      <li><code>{date:d-m-y}</code> Deployment date (e.g., 01-06-2024)</li>
                      <li><code>{date:y/m/d}</code> Deployment date (e.g., 2024/06/01)</li>
                      <li><code>{date:d/m/y}</code> Deployment date (e.g., 01/06/2024)</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="projectBranchFilter">Branch Filter</label>
                <input type="text" id="projectBranchFilter" class="form-control" placeholder="Filter branches...">
              </div>

              <div class="form-actions">
                <button id="saveProjectBtn" class="btn btn-primary">Save Project</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- History Page -->
      <div id="history-page" class="page">
        <div class="page-header">
          <h2>Deploy History</h2>
          <button id="refreshHistoryBtn" class="btn btn-primary">Refresh</button>
        </div>

        <div class="history-container">
          <div class="log-files-list">
            <h3>Log Files</h3>
            <div id="logFilesList"></div>
          </div>
          <div class="log-content">
            <h3>Log Content</h3>
            <div id="logContent" class="log-output"></div>
          </div>
        </div>
      </div>

      <!-- Settings Page -->
      <div id="settings-page" class="page">
        <div class="page-header">
          <h2>Settings</h2>
        </div>

        <div class="settings-container">
          <div class="setting-item">
            <h3>Theme</h3>
            <p>Toggle between light and dark mode</p>
            <label class="toggle-switch">
              <input type="checkbox" id="themeToggle2">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <h3>About</h3>
            <p><strong>Deploy Tool</strong> v<span class="app-version">...</span></p>
            <p>Created by Thanhdc</p>
            <p>Electron-based Git deployment automation tool</p>
          </div>

          <div class="setting-item">
            <h3>Log Directory</h3>
            <p id="logDirPath">Loading...</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Loading Spinner Overlay -->
  <div id="loadingOverlay" class="loading-overlay" style="display: none;">
    <div class="spinner"></div>
    <p>Deploying...</p>
  </div>

  <!-- Update Available Notification Popup -->
  <div id="updateAvailablePopup" class="update-notification-popup" style="display: none;">
    <div class="update-notification-content">
      <div class="update-notification-icon">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      
      <div class="update-notification-body">
        <h3 class="update-notification-title">üéâ Phi√™n b·∫£n m·ªõi ƒë√£ ƒë∆∞·ª£c ph√°t h√†nh!</h3>

        <div id="updateReleaseNotes" class="update-release-notes" style="display: none;">
          <h4>üìã N·ªôi dung c·∫≠p nh·∫≠t:</h4>
          <div id="releaseNotesContent" class="release-notes-content">
            <!-- Release notes s·∫Ω ƒë∆∞·ª£c load v√†o ƒë√¢y -->
          </div>
        </div>
        
        <div class="update-version-info">
          <div class="version-badge current">
            <span class="version-label">Hi·ªán t·∫°i</span>
            <span class="version-number app-version">...</span>
          </div>
          <div class="version-arrow">‚Üí</div>
          <div class="version-badge new">
            <span class="version-label">M·ªõi nh·∫•t</span>
            <span class="version-number" id="latestVersionText">-</span>
          </div>
        </div>

        <!-- GitHub Release Link -->
        <div class="github-release-link-container">
          <a id="githubReleaseLink" href="#" target="_blank" class="github-release-link" style="display: none;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            <span>
              Xem tr√™n GitHub Release
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="external-icon">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                <polyline points="15 3 21 3 21 9"></polyline>
                <line x1="10" y1="14" x2="21" y2="3"></line>
              </svg>
            </span>
          </a>
        </div>
      </div>
      
      <div class="update-notification-actions">
        <!-- <button id="downloadNowBtn" class="btn-update btn-primary-update">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          T·∫£i xu·ªëng ngay
        </button> -->
        <button id="remindLaterBtn" class="btn-update btn-secondary-update">
          <span>ƒê·ªÉ sau</span>
        </button>
        <button id="viewReleaseNotesBtn" class="btn-link-update">
          <span>·∫®n chi ti·∫øt ‚Üë</span>
        </button>
      </div>
      
      <button id="closeUpdatePopupBtn" class="close-update-popup">√ó</button>
    </div>
  </div>


  <!-- TypeScript compiled to JavaScript -->
  <script src="../../dist/renderer/scripts/renderer.js"></script>
  <script src="../../dist/renderer/scripts/holiday-theme-manager.js"></script>
</body>
</html>