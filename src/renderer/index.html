<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deploy Tool</title>
  <link rel="stylesheet" href="styles/themes.css">
  <link rel="stylesheet" href="styles/main.css">
</head>
<body class="dark-theme">
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>Deploy Tool</h1>
      </div>
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="deploy">
          <span class="nav-icon">üöÄ</span>
          <span class="nav-label">Deploy</span>
        </a>
        <a href="#" class="nav-item" data-page="projects">
          <span class="nav-icon">üì¶</span>
          <span class="nav-label">Projects</span>
        </a>
        <a href="#" class="nav-item" data-page="history">
          <span class="nav-icon">üìú</span>
          <span class="nav-label">History</span>
        </a>
        <a href="#" class="nav-item" data-page="settings">
          <span class="nav-icon">‚öôÔ∏è</span>
          <span class="nav-label">Settings</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <div class="theme-toggle">
          <label class="toggle-switch">
            <input type="checkbox" id="themeToggle">
            <span class="toggle-slider"></span>
          </label>
          <span class="toggle-label">Dark Mode</span>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Deploy Page -->
      <div id="deploy-page" class="page active">
        <div class="page-header">
          <h2>Deploy Project</h2>
        </div>
        
        <div class="deploy-form">
          <div class="form-row">
            <div class="form-group">
              <label for="projectSelect">Project</label>
              <select id="projectSelect" class="form-control">
                <option value="">Select a project...</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="branchSelect">Branch</label>
              <div class="select-with-filter">
                <input type="text" id="branchFilter" class="form-control filter-input" placeholder="Filter branches..." disabled>
                <select id="branchSelect" class="form-control select-filtered" disabled>
                  <option value="">Select branch...</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="envSelect">Environment</label>
              <select id="envSelect" class="form-control" disabled>
                <option value="">Select environment...</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="typeSelect">Deploy Type</label>
              <select id="typeSelect" class="form-control" disabled>
                <option value="">Select type...</option>
              </select>
            </div>

            <div class="form-group">
              <label for="commitTemplate">Commit format</label>
              <input type="text" id="commitTemplate" class="form-control" placeholder="deploy: {env}, {type}" value="deploy: {env}, {type}" disabled>
            </div>

            <div class="form-group">
              <label for="fileContentTemplate">File content format</label>
              <input type="text" id="fileContentTemplate" class="form-control" placeholder="deploy: {env}, {type}" value="deploy: {env}, {type}" disabled>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" id="dryRunCheck">
                <span>Dry Run (test without pushing)</span>
              </label>
            </div>
          </div>

          <div class="form-actions">
            <button id="deployBtn" class="btn btn-primary" disabled>
              <span class="btn-text">Start Deploy</span>
            </button>
          </div>
        </div>

        <!-- Deploy Log Output -->
        <div class="log-container">
          <div class="log-header">
            <h3>Deploy Log</h3>
            <button id="clearLogBtn" class="btn btn-small">Clear</button>
          </div>
          <div id="deployLog" class="log-output"></div>
        </div>
      </div>

      <!-- Projects Page -->
      <div id="projects-page" class="page">
        <div class="page-header">
          <h2>Manage Projects</h2>
          <button id="addProjectBtn" class="btn btn-primary">+ Add Project</button>
        </div>

        <div id="projectsList" class="projects-list"></div>

        <!-- Add/Edit Project Form -->
        <div id="projectFormContainer" class="project-form-container" style="display: none;">
          <div class="form-card">
            <div class="form-card-header">
              <h3 id="formTitle">Add New Project</h3>
              <button id="cancelFormBtn" class="btn btn-small">Cancel</button>
            </div>
            <div class="form-card-body">
              <div class="form-group">
                <label for="projectName">Project Name *</label>
                <input type="text" id="projectName" class="form-control" placeholder="e.g., auth">
              </div>
              
              <div class="form-group">
                <label for="repoPath">Repository Path *</label>
                <div class="input-with-button">
                  <input type="text" id="repoPath" class="form-control" placeholder="C:\Projects\my-project">
                  <button type="button" id="browseRepoBtn" class="btn btn-small btn-browse">Browse</button>
                </div>
              </div>
              
              <div class="form-group">
                <label for="envs">Environments (comma separated) *</label>
                <input type="text" id="envs" class="form-control" placeholder="dev, dev-final, stage, stage-final">
              </div>
              
              <div class="form-group">
                <label for="deployTypes">Deploy Types (comma separated) *</label>
                <input type="text" id="deployTypes" class="form-control" placeholder="api, webapp, all">
              </div>

              <div class="form-group">
                <label for="projectCommitFormat">Commit Format *</label>
                <div class="select-with-input">
                  <select id="projectCommitFormat" class="form-control">
                    <option value="v1" selected>V1</option>
                    <option value="v2">V2</option>
                    <option value="custom">custom</option>
                  </select>
                  <input type="text" id="projectCommitTemplate" class="form-control" placeholder="deploy: {env}, {type}" disabled>
                  <div class="note-box">
                    <span>Note:</span>
                    <ul>
                      <li><code>{env}</code> Environments (e.g., dev, stage)</li>
                      <li><code>{type}</code> Deploy types (e.g., api, webapp)</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="projectFileContentFormat">CICD file content format *</label>
                <div class="select-with-input">
                  <select id="projectFileContentFormat" class="form-control">
                    <option value="default" selected>Using commit message</option>
                    <option value="custom">custom</option>
                  </select>
                  <input type="text" id="projectFileContentTemplate" class="form-control" placeholder="File content format..." value="deploy: {env}, {type}" disabled>

                  <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                      <input type="checkbox" id="projectFileContentSmartAppend">
                      <span>Smart append (append "+" when message is duplicate)</span>
                    </label>
                  </div>

                  <div class="note-box">
                    <span>Note:</span>
                    <ul>
                      <li><code>{env}</code> Environments (e.g., dev, stage)</li>
                      <li><code>{type}</code> Deploy types (e.g., api, webapp)</li>
                      <li><code>{date:y-m-d}</code> Deployment date (e.g., 2024-06-01)</li>
                      <li><code>{date:d-m-y}</code> Deployment date (e.g., 01-06-2024)</li>
                      <li><code>{date:y/m/d}</code> Deployment date (e.g., 2024/06/01)</li>
                      <li><code>{date:d/m/y}</code> Deployment date (e.g., 01/06/2024)</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="projectBranchFilter">Branch Filter</label>
                <input type="text" id="projectBranchFilter" class="form-control" placeholder="Filter branches...">
              </div>

              <div class="form-actions">
                <button id="saveProjectBtn" class="btn btn-primary">Save Project</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- History Page -->
      <div id="history-page" class="page">
        <div class="page-header">
          <h2>Deploy History</h2>
          <button id="refreshHistoryBtn" class="btn btn-primary">Refresh</button>
        </div>

        <div class="history-container">
          <div class="log-files-list">
            <h3>Log Files</h3>
            <div id="logFilesList"></div>
          </div>
          <div class="log-content">
            <h3>Log Content</h3>
            <div id="logContent" class="log-output"></div>
          </div>
        </div>
      </div>

      <!-- Settings Page -->
      <div id="settings-page" class="page">
        <div class="page-header">
          <h2>Settings</h2>
        </div>

        <div class="settings-container">
          <div class="setting-item">
            <h3>Theme</h3>
            <p>Toggle between light and dark mode</p>
            <label class="toggle-switch">
              <input type="checkbox" id="themeToggle2">
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-item">
            <h3>About</h3>
            <p><strong>Deploy Tool</strong> v<span class="app-version">...</span></p>
            <p>Created by Thanhdc</p>
            <p>Electron-based Git deployment automation tool</p>
          </div>

          <div class="setting-item">
            <h3>Log Directory</h3>
            <p id="logDirPath">Loading...</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Loading Spinner Overlay -->
  <div id="loadingOverlay" class="loading-overlay" style="display: none;">
    <div class="spinner"></div>
    <p>Deploying...</p>
  </div>

  <!-- TypeScript compiled to JavaScript -->
  <script src="../../dist/renderer/scripts/renderer.js"></script>
</body>
</html>